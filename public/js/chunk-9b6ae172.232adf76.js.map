{"version":3,"sources":["webpack:///./src/views/Profile.vue?db09","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/Profile.vue?c519","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?3600","webpack:///./src/views/Profile.vue"],"names":["requireObjectCoercible","quot","module","exports","string","tag","attribute","value","S","String","p1","replace","$","createHTML","forcedStringHTMLMethod","target","proto","forced","link","url","this","fails","METHOD_NAME","test","toLowerCase","split","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","myProfile","avatar","_v","_s","name","email","on","verifyEmail","_m","ref","handleUploadAvatar","submitAvatar","_e","staticRenderFns","data","computed","methods","$refs","files","beforeCreate","needAuthenticate","component"],"mappings":"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","file":"js/chunk-9b6ae172.232adf76.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&lang=scss&\"","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.myProfile)?_c('div',[_c('div',{staticClass:\"bg-gray-1 pt-5 pb-5 pl-4 pr-4\",attrs:{\"id\":\"profile\"}},[_c('img',{staticClass:\"rounded-circle\",attrs:{\"src\":_vm.myProfile.avatar}}),(_vm.myProfile.isVerified)?_c('div',{staticClass:\"profile__info mt-3\"},[_c('div',{staticClass:\"profile__info__name mb-3\"},[_c('p',{staticClass:\"info__name fontweight-2 fontsize-5 mr-2\"},[_vm._v(_vm._s(_vm.myProfile.name))]),_c('i',{staticClass:\"fas fa-user-check\"})]),_c('p',{staticClass:\"info__email gray-8\"},[_vm._v(_vm._s(_vm.myProfile.email))])]):_c('div',{staticClass:\"profile__info mt-3\"},[_c('div',{staticClass:\"profile__info__name mb-2\"},[_c('p',{staticClass:\"info__name fontweight-2 fontsize-5 mr-2\"},[_vm._v(_vm._s(_vm.myProfile.name))])]),_c('p',{staticClass:\"info__email gray-8\"},[_vm._v(_vm._s(_vm.myProfile.email))]),_c('p',{attrs:{\"id\":\"verifyEmail\"},on:{\"click\":_vm.verifyEmail}},[_vm._v(\"Xác nhận email\")])]),_c('button',{staticClass:\"mt-3 btn btn-dark btn-lg btn-block\",attrs:{\"data-toggle\":\"modal\",\"data-target\":\"#uploadAvatarModal\"}},[_vm._v(\"Upload avatar\")])]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"uploadAvatarModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form-group\"},[_c('input',{ref:\"avatar\",staticClass:\"form-control-file\",attrs:{\"type\":\"file\",\"id\":\"avatarFile\",\"name\":\"avatar\"},on:{\"change\":_vm.handleUploadAvatar}})])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"Close\")]),(_vm.isLoading)?_c('button',{staticClass:\"buttonload btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.submitAvatar}},[_c('i',{staticClass:\"fa fa-spinner fa-spin mr-2\"}),_vm._v(\"Loading \")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.submitAvatar}},[_vm._v(\"Save changes\")])])])])])]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"exampleModalLabel\"}},[_vm._v(\"Upload Avatar\")]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"myProfile\">\r\n    <div id=\"profile\" class=\"bg-gray-1 pt-5 pb-5 pl-4 pr-4\">\r\n      <img class=\"rounded-circle\" :src=\"myProfile.avatar\" />\r\n      <div class=\"profile__info mt-3\" v-if=\"myProfile.isVerified\">\r\n        <div class=\"profile__info__name mb-3\">\r\n          <p class=\"info__name fontweight-2 fontsize-5 mr-2\">{{myProfile.name}}</p>\r\n          <i class=\"fas fa-user-check\"></i>\r\n        </div>\r\n        <p class=\"info__email gray-8\">{{myProfile.email}}</p>\r\n      </div>\r\n\r\n      <div class=\"profile__info mt-3\" v-else>\r\n        <div class=\"profile__info__name mb-2\">\r\n          <p class=\"info__name fontweight-2 fontsize-5 mr-2\">{{myProfile.name}}</p>\r\n        </div>\r\n        <p class=\"info__email gray-8\">{{myProfile.email}}</p>\r\n\r\n        <p @click=\"verifyEmail\" id=\"verifyEmail\">Xác nhận email</p>\r\n      </div>\r\n      <button\r\n        class=\"mt-3 btn btn-dark btn-lg btn-block\"\r\n        data-toggle=\"modal\"\r\n        data-target=\"#uploadAvatarModal\"\r\n      >Upload avatar</button>\r\n    </div>\r\n    <div\r\n      class=\"modal fade\"\r\n      id=\"uploadAvatarModal\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">Upload Avatar</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"form-group\">\r\n              <input\r\n                type=\"file\"\r\n                class=\"form-control-file\"\r\n                id=\"avatarFile\"\r\n                name=\"avatar\"\r\n                ref=\"avatar\"\r\n                @change=\"handleUploadAvatar\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              v-if=\"isLoading\"\r\n              class=\"buttonload btn btn-primary\"\r\n              @click=\"submitAvatar\"\r\n            >\r\n              <i class=\"fa fa-spinner fa-spin mr-2\"></i>Loading\r\n            </button>\r\n            <button type=\"button\" v-else class=\"btn btn-primary\" @click=\"submitAvatar\">Save changes</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"Profile\",\r\n  data() {\r\n    return {\r\n      avatar: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"myProfile\", \"isLoading\"]),\r\n  },\r\n  methods: {\r\n    handleUploadAvatar() {\r\n      this.avatar = this.$refs.avatar.files[0];\r\n    },\r\n    async submitAvatar() {\r\n      let formData = new FormData();\r\n      // Tương đương với <input name=\"avatar\" value=\"this.avatar\" />\r\n      // Từ đó server dùng multer.single(\"avatar\") sẽ nhận được file ảnh này để xử lý\r\n\r\n      /*  formData.append(\"avatar\", this.avatar);\r\n      const response = await axios.post(\"/api/upload/avatar\", formData, {\r\n        headers: {\r\n          \"X-Requested-With\": \"XMLHttpRequest\",\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      if (response.data.isError) {\r\n        this.$router.push(\"/notfound\");\r\n      } else {\r\n        this.$router.go();\r\n      } */\r\n\r\n      // Không sử dụng multer nữa, chuyển sang sử dụng API của imgur\r\n\r\n      formData.append(\"image\", this.$refs.avatar.files[0]);\r\n\r\n      this.$store.dispatch(\"setLoading\", true);\r\n\r\n      const responseUploadImg = await axios.post(\r\n        \"https://api.imgur.com/3/image\",\r\n        formData,\r\n        {\r\n          headers: {\r\n            Authorization: \"Client-ID b9c913d9d32ae3c\",\r\n          },\r\n        }\r\n      );\r\n      const responseChangeDB = await axios.post(\r\n        \"/api/upload/avatar\",\r\n        {\r\n          _id: this.myProfile._id,\r\n          avatar: responseUploadImg.data.data.link,\r\n        },\r\n        {\r\n          headers: {\r\n            \"X-Requested-With\": \"XMLHttpRequest\",\r\n          },\r\n        }\r\n      );\r\n      if (responseChangeDB.data.isError) {\r\n        this.$router.push(\"/notfound\");\r\n      } else {\r\n        this.$router.go();\r\n      }\r\n    },\r\n    async verifyEmail() {\r\n      this.$router.push(\"/verification\");\r\n      await axios.post(\r\n        \"/api/verifyEmail\",\r\n        {},\r\n        {\r\n          headers: {\r\n            \"X-Requested-With\": \"XMLHttpRequest\",\r\n          },\r\n        }\r\n      );\r\n    },\r\n  },\r\n  beforeCreate() {\r\n    this.needAuthenticate();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#profile {\r\n  width: 400px;\r\n  margin: 0 auto;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  img {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n\r\n  button {\r\n    width: 70%;\r\n  }\r\n}\r\n\r\n.profile__info__name {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  p {\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n\r\n#verifyEmail {\r\n  cursor: pointer;\r\n  color: #2980b9;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=15e8dee9&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}